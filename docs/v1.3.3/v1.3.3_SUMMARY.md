## docs/v1.3.3/2026-0218-1530_implementation_plan.md
# v1.3.3 IMEç¢ºå®šEnterãƒã‚°ä¿®æ­£

Macã§Geminiãƒ»Slackãªã©ã®æ—¥æœ¬èªIMEå…¥åŠ›æ™‚ã«ã€æ¼¢å­—å¤‰æ›ç¢ºå®šã®EnterãŒæ”¹è¡Œã¨ã—ã¦èª¤å‡¦ç†ã•ã‚Œã‚‹ä¸å…·åˆã‚’ä¿®æ­£ã™ã‚‹ã€‚

## æ ¹æœ¬åŸå› 

[index.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/index.ts) ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ•ã‚§ãƒ¼ã‚ºãƒªã‚¹ãƒŠãƒ¼ï¼ˆL36-78ï¼‰ã§ã€`isPlainEnter` åˆ¤å®šã« `event.isComposing` ãƒã‚§ãƒƒã‚¯ãŒ**ä¸€åˆ‡ãªã„**ã€‚

```typescript
// ç¾åœ¨ã®ã‚³ãƒ¼ãƒ‰ (L49-50)
const isPlainEnter = event.key === 'Enter'
    && !event.shiftKey && !event.ctrlKey && !event.metaKey && !event.altKey;
```

IMEå¤‰æ›ç¢ºå®šã®Enterã¯ `event.isComposing === true` ã§ `event.key === 'Enter'` ã«ãªã‚‹ãŸã‚ã€`isPlainEnter` ãŒ `true` ã¨åˆ¤å®šã•ã‚Œã€`adapter.insertNewline()` ãŒå‘¼ã°ã‚Œã¦æ”¹è¡ŒãŒæŒ¿å…¥ã•ã‚Œã‚‹ã€‚

> [!IMPORTANT]
> ã“ã®å•é¡Œã¯**å…¨ã‚µã‚¤ãƒˆãƒ»å…¨ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼**ã«å½±éŸ¿ã™ã‚‹å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã®ãƒã‚°ã€‚Geminiï¼ˆdefaultã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ä½¿ç”¨ï¼‰ã‚‚Slackï¼ˆå°‚ç”¨ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ä½¿ç”¨ï¼‰ã‚‚åŒã˜ `index.ts` ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’é€šã‚‹ã€‚

## Proposed Changes

### ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¹ã‚¯ãƒªãƒ—ãƒˆå…±é€šãƒ­ã‚¸ãƒƒã‚¯

#### [MODIFY] [index.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/index.ts)

**ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ•ã‚§ãƒ¼ã‚ºãƒªã‚¹ãƒŠãƒ¼ï¼ˆL36-78ï¼‰ã®å…ˆé ­**ã« IME composing ã‚¬ãƒ¼ãƒ‰ã‚’è¿½åŠ :

```diff
     captureTarget.addEventListener('keydown', (evt) => {
         const event = evt as KeyboardEvent;
         if (!event.isTrusted) return;
+        if (event.isComposing || event.keyCode === 229) return;
         if (!currentConfig || !currentConfig.enabled) return;
```

**ãƒãƒ–ãƒ«ãƒ•ã‚§ãƒ¼ã‚ºãƒªã‚¹ãƒŠãƒ¼ï¼ˆL84-104ï¼‰ã«ã‚‚**åŒæ§˜ã®ã‚¬ãƒ¼ãƒ‰ã‚’è¿½åŠ :

```diff
     doc.addEventListener('keydown', (event) => {
         if (!event.isTrusted) return;
+        if (event.isComposing || event.keyCode === 229) return;
         if (!currentConfig || !currentConfig.enabled) return;
```

> [!NOTE]
> `keyCode === 229` ã¯å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›ã®ãŸã‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€‚`isComposing` ãŒ `undefined` ã®ã‚±ãƒ¼ã‚¹ã‚„ã€ä¸€éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆç‰¹ã«Chrome on Macï¼‰ã§ `compositionend` ç›´å¾Œã® `keydown` ã‚¤ãƒ™ãƒ³ãƒˆã§ `isComposing` ãŒæ­£ã—ãã‚»ãƒƒãƒˆã•ã‚Œãªã„ã‚±ãƒ¼ã‚¹ã«å¯¾å¿œã™ã‚‹ã€‚

---

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒãƒ³ãƒ—

#### [MODIFY] [package.json](file:///Users/kimura512/dev/ctrlEnterSenderA/package.json)
#### [MODIFY] [manifest.json](file:///Users/kimura512/dev/ctrlEnterSenderA/manifest.json)

`1.3.2` â†’ `1.3.3`

---

### ãƒ†ã‚¹ãƒˆ

#### [NEW] [jest.config.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/jest.config.ts)

Jest + ts-jest ã§ã®ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€‚

#### [NEW] [src/content/\_\_tests\_\_/keyhandler.test.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/__tests__/keyhandler.test.ts)

ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã€‚ä»¥ä¸‹ã®ã‚±ãƒ¼ã‚¹ã‚’ã‚«ãƒãƒ¼:

| # | ã‚±ãƒ¼ã‚¹ | `isComposing` | `keyCode` | æœŸå¾…å‹•ä½œ |
|---|--------|--------------|-----------|---------|
| 1 | IMEå¤‰æ›ä¸­ã®Enter | `true` | `13` | **ä½•ã‚‚ã—ãªã„**ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒ«ãƒ¼ï¼‰ |
| 2 | IMEå¤‰æ›ä¸­ï¼ˆkeyCode=229ï¼‰ | `false` | `229` | **ä½•ã‚‚ã—ãªã„** |
| 3 | é€šå¸¸ã®Enter | `false` | `13` | `insertNewline()` å‘¼ã°ã‚Œã‚‹ |
| 4 | Ctrl+Enterï¼ˆsendï¼‰ | `false` | `13` | `triggerSend()` å‘¼ã°ã‚Œã‚‹ |
| 5 | Shift+Enter | `false` | `13` | **ä½•ã‚‚ã—ãªã„**ï¼ˆæ—¢å­˜å‹•ä½œç¶­æŒï¼‰ |

## Verification Plan

### Automated Tests

```bash
cd /Users/kimura512/dev/ctrlEnterSenderA
pnpm add -D jest ts-jest @types/jest
pnpm jest --verbose
```

### Manual Verificationï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿæ–½ï¼‰

1. `pnpm build` ã§ãƒ“ãƒ«ãƒ‰æˆåŠŸã‚’ç¢ºèª
2. Chromeæ‹¡å¼µã‚’ãƒªãƒ­ãƒ¼ãƒ‰
3. **Gemini** ã§æ—¥æœ¬èªå…¥åŠ› â†’ æ¼¢å­—å¤‰æ›ç¢ºå®šEnter â†’ æ”¹è¡ŒãŒå…¥ã‚‰ãªã„ã“ã¨ã‚’ç¢ºèª
4. **Slack** ã§åŒæ§˜ã®ãƒ†ã‚¹ãƒˆ
5. é€šå¸¸ã®Enteræ”¹è¡Œãƒ»Ctrl+Enteré€ä¿¡ãŒå¼•ãç¶šãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª


## docs/v1.3.3/2026-0218-1530_task.md
# v1.3.3 IMEç¢ºå®šEnterãƒã‚°ä¿®æ­£

## èª¿æŸ»
- [x] ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹æ§‹é€ ã®æŠŠæ¡
- [x] æ ¹æœ¬åŸå› ã®ç‰¹å®šï¼ˆ`isComposing`æœªãƒã‚§ãƒƒã‚¯ï¼‰
- [x] å½±éŸ¿ç¯„å›²ã®ç‰¹å®šï¼ˆ`index.ts`å…±é€šãƒ­ã‚¸ãƒƒã‚¯ â†’ å…¨ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å½±éŸ¿ï¼‰

## è¨ˆç”»
- [/] å®Ÿè£…ãƒ—ãƒ©ãƒ³ã®ä½œæˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼

## å®Ÿè£…
- [ ] bugfixãƒ–ãƒ©ãƒ³ãƒä½œæˆï¼ˆ`fix/v1.3.3-ime-enter-mac`ï¼‰
- [ ] `src/content/index.ts` ã« `isComposing` ã‚¬ãƒ¼ãƒ‰è¿½åŠ 
- [ ] ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒãƒ³ãƒ—ï¼ˆ1.3.2 â†’ 1.3.3ï¼‰

## ãƒ†ã‚¹ãƒˆ
- [ ] Jestç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [ ] `src/content/index.ts` ã®ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»ãƒ‘ã‚¹ç¢ºèª

## æ¤œè¨¼
- [ ] ãƒ“ãƒ«ãƒ‰æˆåŠŸç¢ºèª
- [ ] walkthroughä½œæˆ


## docs/v1.3.3/2026-0218-1532_task.md
# v1.3.3 IMEç¢ºå®šEnterãƒã‚°ä¿®æ­£

## èª¿æŸ»
- [x] ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹æ§‹é€ ã®æŠŠæ¡
- [x] æ ¹æœ¬åŸå› ã®ç‰¹å®šï¼ˆ`isComposing`æœªãƒã‚§ãƒƒã‚¯ï¼‰
- [x] å½±éŸ¿ç¯„å›²ã®ç‰¹å®šï¼ˆ`index.ts`å…±é€šãƒ­ã‚¸ãƒƒã‚¯ â†’ å…¨ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å½±éŸ¿ï¼‰

## è¨ˆç”»
- [x] å®Ÿè£…ãƒ—ãƒ©ãƒ³ã®ä½œæˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼

## å®Ÿè£…
- [x] bugfixãƒ–ãƒ©ãƒ³ãƒä½œæˆï¼ˆ`fix/v1.3.3-ime-enter-mac`ï¼‰
- [x] `src/content/index.ts` ã« `isComposing` ã‚¬ãƒ¼ãƒ‰è¿½åŠ 
- [x] ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒãƒ³ãƒ—ï¼ˆ1.3.2 â†’ 1.3.3ï¼‰

## ãƒ†ã‚¹ãƒˆ
- [x] Jestç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] `src/content/__tests__/keyhandler.test.ts` ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆï¼ˆ23ã‚±ãƒ¼ã‚¹å…¨ãƒ‘ã‚¹ï¼‰
- [x] ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»ãƒ‘ã‚¹ç¢ºèª

## æ¤œè¨¼
- [/] ãƒ“ãƒ«ãƒ‰æˆåŠŸç¢ºèª
- [ ] walkthroughä½œæˆ


## docs/v1.3.3/2026-0218-1532_walkthrough.md
# v1.3.3 IMEç¢ºå®šEnterãƒã‚°ä¿®æ­£ â€” Walkthrough

## æ¦‚è¦

Macã§Geminiãƒ»Slackãªã©ã®æ—¥æœ¬èªIMEå…¥åŠ›æ™‚ã«ã€æ¼¢å­—å¤‰æ›ç¢ºå®šã®Enterã‚­ãƒ¼ãŒæ”¹è¡Œã¨ã—ã¦èª¤å‡¦ç†ã•ã‚Œã‚‹ä¸å…·åˆã‚’ä¿®æ­£ã€‚

## æ ¹æœ¬åŸå› 

[index.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/index.ts) ã®ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã§ `event.isComposing` ãƒã‚§ãƒƒã‚¯ãŒçš†ç„¡ã€‚IMEå¤‰æ›ç¢ºå®šEnterãŒ `isPlainEnter === true` ã¨åˆ¤å®šã•ã‚Œ `insertNewline()` ãŒå‘¼ã°ã‚Œã¦ã„ãŸã€‚

## å¤‰æ›´å†…å®¹

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´ |
|---------|------|
| [index.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/index.ts) | IME composingã‚¬ãƒ¼ãƒ‰è¿½åŠ ï¼ˆ2ç®‡æ‰€ï¼‰ + `shouldIgnoreKeyEvent`é–¢æ•°ã®åˆ©ç”¨ |
| [keyClassifier.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/keyClassifier.ts) | **[NEW]** åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’ç´”ç²‹é–¢æ•°ã¨ã—ã¦æŠ½å‡º |
| [keyhandler.test.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/__tests__/keyhandler.test.ts) | **[NEW]** 23ã‚±ãƒ¼ã‚¹ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ |
| [jest.config.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/jest.config.ts) | **[NEW]** Jestè¨­å®š |
| [package.json](file:///Users/kimura512/dev/ctrlEnterSenderA/package.json) | v1.3.3 + testã‚¹ã‚¯ãƒªãƒ—ãƒˆ + Jestä¾å­˜è¿½åŠ  |
| [manifest.json](file:///Users/kimura512/dev/ctrlEnterSenderA/manifest.json) | v1.3.3 |

### ä¿®æ­£ã®ã‚­ãƒ¢

```diff
 captureTarget.addEventListener('keydown', (evt) => {
     const event = evt as KeyboardEvent;
     if (!event.isTrusted) return;
+    if (shouldIgnoreKeyEvent(event)) return;  // â† ã“ã‚Œã ã‘ï¼
     if (!currentConfig || !currentConfig.enabled) return;
```

`shouldIgnoreKeyEvent` ã¯ `event.isComposing || event.keyCode === 229` ã‚’ãƒã‚§ãƒƒã‚¯ã€‚`keyCode === 229` ã¯å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶/Chrome on Mac ã§ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€‚

## ãƒ†ã‚¹ãƒˆçµæœ

```
Tests:       23 passed, 23 total
Time:        0.854 s
```

## ãƒ“ãƒ«ãƒ‰çµæœ

`pnpm build` æˆåŠŸã€‚54ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¤‰æ›ã€ã‚¨ãƒ©ãƒ¼ãªã—ã€‚

## æ®‹ä½œæ¥­

- [ ] **å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿæ–½ï¼‰**: Gemini, Slack ã§æ—¥æœ¬èªå…¥åŠ›â†’æ¼¢å­—å¤‰æ›ç¢ºå®šEnterâ†’æ”¹è¡Œã—ãªã„ã“ã¨ã‚’ç¢ºèª
- [ ] ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥


## docs/v1.3.3/2026-0218-1750_task.md
# v1.3.3 IMEç¢ºå®šEnterãƒã‚°ä¿®æ­£

## èª¿æŸ»
- [x] ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹æ§‹é€ ã®æŠŠæ¡
- [x] æ ¹æœ¬åŸå› ã®ç‰¹å®šï¼ˆ`isComposing`æœªãƒã‚§ãƒƒã‚¯ï¼‰
- [x] å½±éŸ¿ç¯„å›²ã®ç‰¹å®šï¼ˆ`index.ts`å…±é€šãƒ­ã‚¸ãƒƒã‚¯ â†’ å…¨ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å½±éŸ¿ï¼‰

## è¨ˆç”»
- [x] å®Ÿè£…ãƒ—ãƒ©ãƒ³ã®ä½œæˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼

## å®Ÿè£…
- [x] bugfixãƒ–ãƒ©ãƒ³ãƒä½œæˆï¼ˆ`fix/v1.3.3-ime-enter-mac`ï¼‰
- [x] `src/content/index.ts` ã« `isComposing` ã‚¬ãƒ¼ãƒ‰è¿½åŠ 
- [x] ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒãƒ³ãƒ—ï¼ˆ1.3.2 â†’ 1.3.3ï¼‰

## ãƒ†ã‚¹ãƒˆ
- [x] Jestç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] `src/content/__tests__/keyhandler.test.ts` ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆï¼ˆ23ã‚±ãƒ¼ã‚¹å…¨ãƒ‘ã‚¹ï¼‰
- [x] ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»ãƒ‘ã‚¹ç¢ºèª


## UIæ”¹å–„ & i18n
- [x] ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—UIã«ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ãƒˆã‚°ãƒ«ã‚’è¿½åŠ 
- [x] ãƒˆã‚°ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å…±é€šåŒ–ã¨UIçµ±ä¸€
- [x] i18nãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ›´æ–°ï¼ˆæ”¹è¡Œå¯¾å¿œï¼‰
- [x] å…¨34è¨€èªã¸ã®ç¿»è¨³é©ç”¨ã¨æ¤œè¨¼

## æ¤œè¨¼
- [x] ãƒ“ãƒ«ãƒ‰æˆåŠŸç¢ºèª
- [x] walkthroughä½œæˆ


## docs/v1.3.3/2026-0218-1750_walkthrough.md
# v1.3.3 IMEç¢ºå®šEnterãƒã‚°ä¿®æ­£ â€” Walkthrough

## æ¦‚è¦

Macã§Geminiãƒ»Slackãªã©ã®æ—¥æœ¬èªIMEå…¥åŠ›æ™‚ã«ã€æ¼¢å­—å¤‰æ›ç¢ºå®šã®Enterã‚­ãƒ¼ãŒæ”¹è¡Œã¨ã—ã¦èª¤å‡¦ç†ã•ã‚Œã‚‹ä¸å…·åˆã‚’ä¿®æ­£ã€‚

## æ ¹æœ¬åŸå› 

[index.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/index.ts) ã®ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã§ `event.isComposing` ãƒã‚§ãƒƒã‚¯ãŒçš†ç„¡ã€‚IMEå¤‰æ›ç¢ºå®šEnterãŒ `isPlainEnter === true` ã¨åˆ¤å®šã•ã‚Œ `insertNewline()` ãŒå‘¼ã°ã‚Œã¦ã„ãŸã€‚

## å¤‰æ›´å†…å®¹

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´ |
|---------|------|
| [index.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/index.ts) | IME composingã‚¬ãƒ¼ãƒ‰è¿½åŠ ï¼ˆ2ç®‡æ‰€ï¼‰ + `shouldIgnoreKeyEvent`é–¢æ•°ã®åˆ©ç”¨ |
| [keyClassifier.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/keyClassifier.ts) | **[NEW]** åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’ç´”ç²‹é–¢æ•°ã¨ã—ã¦æŠ½å‡º |
| [keyhandler.test.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/src/content/__tests__/keyhandler.test.ts) | **[NEW]** 23ã‚±ãƒ¼ã‚¹ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ |
| [jest.config.ts](file:///Users/kimura512/dev/ctrlEnterSenderA/jest.config.ts) | **[NEW]** Jestè¨­å®š |
| [package.json](file:///Users/kimura512/dev/ctrlEnterSenderA/package.json) | v1.3.3 + testã‚¹ã‚¯ãƒªãƒ—ãƒˆ + Jestä¾å­˜è¿½åŠ  |
| [manifest.json](file:///Users/kimura512/dev/ctrlEnterSenderA/manifest.json) | v1.3.3 |

### ä¿®æ­£ã®ã‚­ãƒ¢

```diff
 captureTarget.addEventListener('keydown', (evt) => {
     const event = evt as KeyboardEvent;
     if (!event.isTrusted) return;
+    if (shouldIgnoreKeyEvent(event)) return;  // â† ã“ã‚Œã ã‘ï¼
     if (!currentConfig || !currentConfig.enabled) return;
```

`shouldIgnoreKeyEvent` ã¯ `event.isComposing || event.keyCode === 229` ã‚’ãƒã‚§ãƒƒã‚¯ã€‚`keyCode === 229` ã¯å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶/Chrome on Mac ã§ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€‚

## ãƒ†ã‚¹ãƒˆçµæœ

```
Tests:       23 passed, 23 total
Time:        0.854 s
```

## ãƒ“ãƒ«ãƒ‰çµæœ

`pnpm build` æˆåŠŸã€‚54ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¤‰æ›ã€ã‚¨ãƒ©ãƒ¼ãªã—ã€‚

## æ®‹ä½œæ¥­

- [ ] **å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿæ–½ï¼‰**: Gemini, Slack ã§æ—¥æœ¬èªå…¥åŠ›â†’æ¼¢å­—å¤‰æ›ç¢ºå®šEnterâ†’æ”¹è¡Œã—ãªã„ã“ã¨ã‚’ç¢ºèª
- [x] ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥

## Popup UI Improvements & i18n (v1.3.3+)

### Changes
1.  **Mode Toggle**: Added a toggle switch in the popup to switch between "Blacklist Mode" (Default ON) and "Whitelist Mode" (Default OFF).
2.  **UI Unification**: Refactored `Toggle` component to ensure consistent design between mode switch and site enable/disable switch.
3.  **Full i18n Support**: Updated messages for all 34 supported languages.
    -   Added proper descriptions with newlines support.
    -   Verified translations for `blacklistMode`, `whitelistMode`, and their descriptions.

### Verification Results
-   **Build**: `pnpm build` passed successfully.
-   **i18n**: Verified all 34 `messages.json` files contain the correct translated keys.


## Pre-Release Security Check (2026-02-18)

Webã‚¹ãƒˆã‚¢æå‡ºå‰ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ã€‚å…¨é …ç›®PASSã€‚

### âœ… ãƒã‚§ãƒƒã‚¯çµæœï¼ˆå…¨PASSï¼‰

| ãƒã‚§ãƒƒã‚¯é …ç›® | çµæœ | è©³ç´° |
|---|---|---|
| ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸç§˜å¯†æƒ…å ± | âœ… PASS | APIã‚­ãƒ¼ã€ãƒˆãƒ¼ã‚¯ãƒ³ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€èªè¨¼æƒ…å ±ãªã— |
| ç’°å¢ƒå¤‰æ•° / .envãƒ•ã‚¡ã‚¤ãƒ« | âœ… PASS | `process.env` / `import.meta.env` ã®å‚ç…§ãªã— |
| å¤–éƒ¨é€šä¿¡ | âœ… PASS | `fetch`, `XMLHttpRequest`, `axios` ç­‰ã®å¤–éƒ¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆãªã— |
| eval / ã‚³ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ | âœ… PASS | `eval()` ã®ä½¿ç”¨ãªã— |
| innerHTML / XSS | âœ… PASS | `innerHTML` / `dangerouslySetInnerHTML` ã®ä½¿ç”¨ãªã— |
| localhost / ãƒ‡ãƒãƒƒã‚°URL | âœ… PASS | `localhost` / `127.0.0.1` ç­‰ã®ãƒ‡ãƒãƒƒã‚°URLãªã— |
| console.logï¼ˆãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ï¼‰ | âœ… PASS | `console.log` / `console.warn` / `console.debug` ãªã— |
| TODO / FIXME / HACK | âœ… PASS | ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«æ®‹å­˜ãªã— |
| å±é™ºãªChrome API | âœ… PASS | `chrome.cookies` / `chrome.webRequest` / `chrome.history` ç­‰ã¯æœªä½¿ç”¨ |
| `window.open` æ‚ªç”¨ | âœ… PASS | ä½¿ç”¨ãªã— |
| PII / å€‹äººæƒ…å ± | âœ… PASS | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®åŸ‹ã‚è¾¼ã¿ãªã— |

### âš ï¸ ç¢ºèªäº‹é …ï¼ˆä½ãƒªã‚¹ã‚¯ãƒ»å¯¾å¿œä¸è¦ï¼‰

| é …ç›® | å†…å®¹ | ãƒªã‚¹ã‚¯ |
|---|---|---|
| `console.error` (3ç®‡æ‰€) | `storage.ts`, `background/index.ts` ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°å‡ºåŠ›ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å«ã¾ãšã‚¸ã‚§ãƒãƒªãƒƒã‚¯ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ | ä½ |
| `chrome.tabs.query` | `popup/App.tsx` ã§ç¾åœ¨ã®ã‚¿ãƒ–URLå–å¾—ã€‚ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å†…ã®ã¿ã€å¤–éƒ¨é€ä¿¡ãªã— | ä½ |
| `<all_urls>` ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ | å…¨ã‚µã‚¤ãƒˆã§å‹•ä½œã™ã‚‹æ‹¡å¼µæ©Ÿèƒ½ã¨ã—ã¦å¿…è¦ã€‚Webã‚¹ãƒˆã‚¢å¯©æŸ»æ™‚ã«èª¬æ˜ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ã‚ã‚Š | æƒ³å®šé€šã‚Š |
| å¤–éƒ¨ãƒªãƒ³ã‚¯ï¼ˆOptions Pageï¼‰ | GitHub, BuyMeACoffee, Patreonã¸ã®ãƒªãƒ³ã‚¯ã€‚å…¨ã¦ `target="_blank"` + `rel="noopener noreferrer"` ä»˜ã | ä½ |

### ğŸ¯ ç·åˆè©•ä¾¡

**ğŸŸ¢ ãƒªãƒªãƒ¼ã‚¹å¯èƒ½** â€” æ©Ÿå¯†æƒ…å ±ã®æ¼ãˆã„ãƒªã‚¹ã‚¯ã¯ã‚¼ãƒ­ã€‚å¤–éƒ¨é€šä¿¡ã‚‚ã‚¼ãƒ­ã€‚
